---
// Componente de búsqueda avanzada
---

<div x-data="{ open: false }" class="relative">
  <!-- Botón de búsqueda -->
  <button
    @click="open = true"
    class="p-2 text-gray-600 dark:text-gray-300 hover:text-unam-blue-500 dark:hover:text-accent-cyan-500 transition-colors"
    aria-label="Buscar"
  >
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
    </svg>
  </button>

  <!-- Modal de búsqueda -->
  <div
    x-show="open"
    x-transition:enter="transition ease-out duration-200"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition ease-in duration-150"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
    @click.away="open = false"
    @keydown.escape.window="open = false"
    class="fixed inset-0 z-50 flex items-start justify-center pt-20 px-4 bg-black/50 backdrop-blur-sm"
    style="display: none;"
  >
    <div
      x-show="open"
      x-transition:enter="transition ease-out duration-200"
      x-transition:enter-start="opacity-0 scale-95"
      x-transition:enter-end="opacity-100 scale-100"
      x-transition:leave="transition ease-in duration-150"
      x-transition:leave-start="opacity-100 scale-100"
      x-transition:leave-end="opacity-0 scale-95"
      class="w-full max-w-2xl bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden"
      @click.stop
    >
      <!-- Input de búsqueda -->
      <div class="p-6 border-b border-gray-200 dark:border-gray-700">
        <div class="relative">
          <svg class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
          <input
            type="text"
            placeholder="Buscar en el sitio..."
            x-ref="searchInput"
            x-init="$watch('open', value => value && setTimeout(() => $refs.searchInput.focus(), 100))"
            class="w-full pl-12 pr-4 py-3 bg-gray-50 dark:bg-gray-900 border-0 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-unam-blue-500 dark:focus:ring-accent-cyan-500"
          />
        </div>
      </div>

      <!-- Resultados (placeholder) -->
      <div class="p-6 max-h-96 overflow-y-auto">
        <p class="text-center text-gray-500 dark:text-gray-400 py-8">
          Escribe para buscar en publicaciones, investigación y más...
        </p>
        <!-- Aquí se integrarán los resultados de Pagefind en el futuro -->
      </div>

      <!-- Footer con atajos de teclado -->
      <div class="px-6 py-3 bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700">
        <div class="flex items-center justify-between text-xs text-gray-500 dark:text-gray-400">
          <span>Presiona <kbd class="px-2 py-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded">ESC</kbd> para cerrar</span>
        </div>
      </div>
    </div>
  </div>
</div>
